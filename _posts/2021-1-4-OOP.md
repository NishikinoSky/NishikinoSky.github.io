---
layout: post
title: C++
tags: C++ oop
stickie: false
---
C++期末复习

# 构造函数与析构函数

## 构造函数

构造函数名与类名相同，可有任意类型参数但不能指定返回值，在定义对象的同时被调用而不可被显式调用，可以重载，一般为公有函数。

### 构造函数作用

初始化对象的数据成员。

### 构造函数分类

无参构造函数

带默认值的构造函数

有参构造函数

拷贝构造函数

在构造函数的重载中可一起使用。

### 举例

比如构造类Date，则在public中有Date(int y,int m,int d);

函数体即可在类内也可在类外。

类外实现：Date::Date(int y,int m,int d){year=y;month=m;day=d;}

或者用初始化列表Date:: Date(int y,int m,int d):year(y),month(m),day(d) {}

注意：类成员初始化顺序为在类中被声明的顺序，而非初始化表中的数据。

创建对象则为Date date1(y,m,d);或者Date* date1 = new Date(y,m,d);

### 构造函数重载

名字相同，但参数个数或类型不同。

## 拷贝构造函数

通过 = 复制对象，系统自动调用拷贝构造函数。

每个类必须有一个拷贝构造函数。

### 拷贝构造函数的使用情况

* 调用拷贝构造函数的情况用一个已经存在的对象去初始化另一个同类对象。

* 类的对象作为函数的形参。

* 函数的返回值为类的对象

### 举例

以类Date举例，public中有Date(int y,int m,int d); 和 Date (Date &p); // p为一个对象名

拷贝构造函数的实现为 Date::Date (Date &p){year=p.year; month=p.month; day=p.day;};

p1，p2为Date的两个对象，也可以这样来初始化p2：

Date p1(y,m,d);   Date p2(p1); //代入法

或 Date p2 = p1 //赋值法

### 浅拷贝 & 深拷贝

参考[此文](https://blog.csdn.net/qq_29339467/article/details/90719951)

## 析构函数

函数名与构造函数相同，在函数名前添加 ~

没有参数、没有返回值、不能重载、一个类只能有一个析构函数。

系统自动调用一个默认析构函数。

调用次序与构造函数调用次序相反。
 
# 类的设计

## 自引用指针this

每一个类的成员函数都有，类型为类的类型，调用成员函数时被初始化为函数所在类的对象地址。

this为const指针，作用域仅在一个对象的内部。

 * this表示当前对象本身。

## 对象数组

以Student类为例

Student stu[4]; 定义对象数组

stu[2].成员名; 访问成员

利用初始化表对对象数组进行初始化，当构造函数具有一个以上参数时对二维数组对象进行初始化。

## 对象指针

以Date类为例

定义指针变量和一个对象： Date * p, date1;

初始化指针变量： p = &date1;

访问对象成员： p -> setdate(2021,1.4);

指向对象数组时可以利用p++或p--访问数组中相邻的对象。

## 指向数据成员的指针

A ob; //声明类A的一个对象ob

A * p=&ob;

int A :: * pc2;  // 声明指向类A的一个数据成员的指针pc2

pc2 = & A :: z;  // 给pc2赋值

ob.* pc2 // 使用方法1

p->* pc2; //使用方法2

## 向函数传递对象

可将对象指针作为函数的参数，实现信息传递而不进行副本拷贝。

使用对象引用则更优。

## 静态成员







